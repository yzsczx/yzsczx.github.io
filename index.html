<!DOCTYPE html>
<html lang="zh-CN" data-bs-theme="light">
<head>
    <!-- 头部元信息与样式保持不变 -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>清风徐来 | 酷鱼的小站</title>
    <!-- 核心依赖 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Fira+Code&display=swap" rel="stylesheet">
    <style>
        /* 原有样式保持不变 */
    </style>
</head>
<body>
    <!-- 页面结构保持不变 -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let allArticles = [];
        
        // 从服务器加载数据
        async function loadArticles() {
            try {
                const response = await fetch('http://localhost:3000/api/articles');
                allArticles = await response.json();
                renderArticles(1);
            } catch (error) {
                console.error('加载数据失败:', error);
            }
        }

        // 保存数据到服务器
        async function saveArticles() {
            try {
                await fetch('http://localhost:3000/api/articles', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(allArticles)
                });
            } catch (error) {
                console.error('保存失败:', error);
            }
        }

        async function handleSubmit(event) {
            event.preventDefault();
            const newPost = {
                id: Date.now(),
                title: document.getElementById('postTitle').value,
                content: document.getElementById('postContent').value,
                tags: document.getElementById('postTags').value.split(',').map(t => t.trim()),
                date: new Date().toLocaleDateString('zh-CN'),
                link: document.getElementById('postLink').value || null
            };
            
            allArticles.unshift(newPost);
            await saveArticles(); // 保存到服务器
            resetForm();
            renderArticles(1);
            const modal = bootstrap.Modal.getInstance(document.getElementById('postModal'));
            modal.hide();
            return false;
        }

        // 初始化时加载数据
        document.addEventListener('DOMContentLoaded', () => {
            loadArticles();
            // 其他初始化代码...
        });
        
        // 其余函数保持不变...
    </script>
</body>
</html>